<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>INDIVIDNI — studio</title>
  <meta name="description" content="INDIVIDNI — видеопродакшн полного цикла: реклама, клипы, контент. Шоурил, кейсы и бриф." />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700&family=Caveat:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Rubik+Wet+Paint&display=swap" rel="stylesheet">

  <!-- Preload critical above-the-fold assets (SVG wordmark + hero bg) -->
  <link rel="preload" as="video" href="./assets/ui/Showreel_3.mp4" type="video/mp4" />
  
  <!-- Landing styles (ref-based) -->
  <link rel="stylesheet" href="./assets/css/landing_ref.css?v=16" />
</head>
<body>

<!-- TOP BANNER -->
<div class="pro-banner" id="proBanner">
  <span>Открыт набор на проекты • 2026 • Moscow</span>
  <a class="pill" href="./brief.html">Заполнить бриф</a>
  <button class="close-btn" type="button" data-close-banner>×</button>
</div>

<!-- NAV -->
<nav>
  <div class="nav-left">
    <a class="nav-brand" href="#top">INDIVIDNI</a>
    <span class="nav-by">studio</span>
    <div class="nav-links" aria-label="Меню">
      <a href="#projects">Проекты</a>
      <a href="#services">Услуги</a>
      <a href="#process">Этапы</a>
      <a href="./brief.html">Бриф</a>
      <a href="#contact">Контакты</a>
    </div>
  </div>
  <div class="nav-right">
    <span class="nav-tag">Video production</span>
    <a class="btn-dl" href="#projects">Смотреть работы</a>
    <button class="nav-toggle" type="button" aria-label="Открыть меню" data-nav-toggle>
      <span></span><span></span>
    </button>
  </div>

  <!-- Mobile menu -->
  <div class="nav-drawer" data-nav-drawer>
    <a href="#projects">Проекты</a>
    <a href="#services">Услуги</a>
    <a href="#process">Этапы</a>
    <a href="./brief.html">Бриф</a>
    <a href="#contact">Контакты</a>
  </div>
</nav>

<!-- HERO -->
<section class="hero" id="top">
    <!-- HERO background video (loop, muted) -->
  <video class="hero-bg-video" id="heroBgVideo" autoplay muted loop playsinline preload="auto" webkit-playsinline aria-hidden="true">
    <source src="./assets/ui/Showreel_3.mp4" type="video/mp4"/>
    <source src="./assets/ui/showreel_3.mp4" type="video/mp4"/>
  </video>
  <div class="hero-bg-overlay" aria-hidden="true"></div>

<div class="hero-brand" aria-label="Brand heading">
  <div class="hero-brand__small">studio</div>

    <div class="hero-brand__big">INDIVIDNI</div>
</div>

  


  <h1>Full‑cycle video production.<br/>Bold visuals that keep attention.</h1>
  <p class="hero-sub">Реклама, клипы, бренд‑контент. От идеи до финального мастер‑файла. Ниже — работы и быстрый бриф.</p>
</section>

<!-- PROJECTS — full-width split (no slider) -->
<section class="split-projects" id="projects" aria-label="Проекты">
  <div class="split-projects__inner">
    <div class="split-left">
      <div class="split-kicker">Projects</div>
      <h2 class="split-title">Selected works</h2>
      <p class="split-text">Короткая витрина проектов. Наведи на кейс справа — и фон станет ярким цветом. Фото позже заменим на реальные.</p>
      <div class="split-meta">
        <span>Commercial</span>
        <span>Music</span>
        <span>Brand</span>
        <span>Social</span>
      </div>

      <!-- TV moved сюда из HERO (структура не менялась) -->
      <div class="hero-tv-stage" data-tv-hero aria-label="3D TV hero" role="button" tabindex="0" aria-haspopup="dialog" aria-controls="showreelModal" data-open-showreel>
            <canvas id="tvHeroCanvas"></canvas>
            <video class="tvfly__hiddenVideo lazy-video" id="tvHeroVideo" loop muted playsinline preload="none" webkit-playsinline data-play-on-view>
              <source data-src="./assets/ui/showreel_2.mp4" type="video/mp4"/>
            </video>
          </div>

    </div>

    <div class="split-right" data-project-chooser>
      <div class="split-right-wrap" aria-label="Сетка проектов">
        <div class="split-right-grid">

          <!-- Using old project links & photos as placeholders -->
          <a class="proj-item" href="./project_gac/" data-color="#005BFF">
            <div class="proj-thumb"><img src="./assets/project/1/2.jpg" alt="GAC case" onerror="this.onerror=null;this.src='./assets/img/ph_16x9.png';" /></div>
            <div class="proj-info">
              <div class="proj-title">GAC case</div>
              <div class="proj-sub">case • 2025</div>
            </div>
          </a>

          <a class="proj-item" href="./project_tenderness/" data-color="#FF00C8">
            <div class="proj-thumb"><img src="./assets/project/2/1.jpg" alt="Tenderness music" onerror="this.onerror=null;this.src='./assets/img/ph_16x9.png';" /></div>
            <div class="proj-info">
              <div class="proj-title">TENDERNESS</div>
              <div class="proj-sub">music • 2025</div>
            </div>
          </a>

          <a class="proj-item" href="./project_gac/" data-color="#FF003D">
            <div class="proj-thumb"><img src="./assets/project/1/3.jpg" alt="GAC frame" onerror="this.onerror=null;this.src='./assets/img/ph_16x9.png';" /></div>
            <div class="proj-info">
              <div class="proj-title">GAC GH4</div>
              <div class="proj-sub">studio • 2025</div>
            </div>
          </a>

          <a class="proj-item" href="./project_tenderness/" data-color="#00FF4F">
            <div class="proj-thumb"><img src="./assets/project/2/2.jpg" alt="Tenderness frame" onerror="this.onerror=null;this.src='./assets/img/ph_16x9.png';" /></div>
            <div class="proj-info">
              <div class="proj-title">Tenderness</div>
              <div class="proj-sub">clip • 2025</div>
            </div>
          </a>

        </div>

        <a class="split-more" href="#" aria-label="Смотреть ещё проекты">Смотреть ещё →</a>
      </div>
    </div>
  </div>
</section>

<!-- WHO (graphic title) -->
<section class="who" id="who" aria-label="Кто мы">
  <div class="who-inner">
    <img class="who-marker-img" src="./assets/png/Individni_studio.png" alt="INDIVIDNI studio" loading="lazy" />
    <h2 class="who-title" aria-label="Кто мы">
      <span>КТО</span>
      <span>МЫ</span>
    </h2>
    <div class="who-desc">
  <p><strong>INDIVIDNI STUDIO</strong> — это не просто видеопродакшн, это люди.</p>
  <p>Мы не «контент‑завод», поэтому каждый проект делаем по‑настоящему индивидуально: вникаем, задаём вопросы, предлагаем идеи и честно говорим, что сработает, а что — нет.</p>
  <p>Мы креативные ребята, которые любят своё дело, и нам важно, чтобы видео выглядело живым, стильным и точно попадало в задачу.</p>
  <p>С нами легко: спокойно обсудим, соберём концепт, аккуратно снимем и доведём до результата, которым хочется делиться.</p>
</div>
  </div>
</section>

<!-- SERVICES -->
<section class="services-wide" id="services" aria-label="Услуги">
  <div class="services-head">
    <h2 class="services-title">УСЛУГИ</h2>
  </div>

  <div class="services-grid" role="list">
    <a class="svc-card svc-card--blue" role="listitem" href="#">
      <div class="svc-media">
        <video class="svc-video lazy-video" muted loop playsinline preload="none" data-play-on-view>
          <source data-src="./assets/services/video/shooting.mp4" type="video/mp4" />
        </video>
        <div class="svc-overlay">
          <div class="svc-name">Съёмка</div>
          <div class="svc-text">Съёмочная группа, свет, камера, постановка и контроль качества.</div>
        </div>
      </div>
    </a>

    <a class="svc-card svc-card--red" role="listitem" href="#">
      <div class="svc-media">
        <video class="svc-video lazy-video" muted loop playsinline preload="none" data-play-on-view>
          <source data-src="./assets/services/video/editing.mp4" type="video/mp4" />
        </video>
        <div class="svc-overlay">
          <div class="svc-name">Монтаж</div>
          <div class="svc-text">Монтаж под ритм и смысл, версии под форматы, субтитры.</div>
        </div>
      </div>
    </a>

    <a class="svc-card svc-card--green" role="listitem" href="#">
      <div class="svc-media">
        <video class="svc-video lazy-video" muted loop playsinline preload="none" data-play-on-view>
          <source data-src="./assets/services/video/sound.mp4" type="video/mp4" />
        </video>
        <div class="svc-overlay">
          <div class="svc-name">Цвет</div>
          <div class="svc-text">Color grading и техническая подготовка под площадки.</div>
        </div>
      </div>
    </a>

    <a class="svc-card svc-card--yellow" role="listitem" href="#">
      <div class="svc-media">
        <video class="svc-video lazy-video" muted loop playsinline preload="none" data-play-on-view>
          <source data-src="./assets/services/video/photo.mp4" type="video/mp4" />
        </video>
        <div class="svc-overlay">
          <div class="svc-name">Фото</div>
          <div class="svc-text">Фото‑съёмка, студийные кадры и контент для кампаний.</div>
        </div>
      </div>
    </a>

    <a class="svc-card svc-card--pink" role="listitem" href="#">
      <div class="svc-media">
        <video class="svc-video lazy-video" muted loop playsinline preload="none" data-play-on-view>
          <source data-src="./assets/services/video/AI.mp4" type="video/mp4" />
        </video>
        <div class="svc-overlay">
          <div class="svc-name">AI графика</div>
          <div class="svc-text">AI‑графика, титры и визуальные приёмы для усиления подачи.</div>
        </div>
      </div>
    </a>
  </div>

  <div class="services-more-wrap">
    <a class="services-more" href="#">Смотреть все услуги →</a>
  </div>
</section>

<!-- PARTNERS MARQUEE -->
<section class="partners-section" aria-label="Партнёры">
  <div class="partners-track" aria-hidden="true">
    <span class="partner">
      <span class="partner-logo">C</span>
      <span class="partner-name">Canon</span>
    </span>
    <span class="partner">
      <span class="partner-logo">S</span>
      <span class="partner-name">Sony</span>
    </span>
    <span class="partner">
      <span class="partner-logo">P</span>
      <span class="partner-name">Panasonic</span>
    </span>
    <span class="partner">
      <span class="partner-logo">A</span>
      <span class="partner-name">ARRI</span>
    </span>
    <span class="partner">
      <span class="partner-logo">D</span>
      <span class="partner-name">DJI</span>
    </span>
    <span class="partner">
      <span class="partner-logo">B</span>
      <span class="partner-name">Blackmagic</span>
    </span>
    <span class="partner">
      <span class="partner-logo">F</span>
      <span class="partner-name">Frame.io</span>
    </span>
    <span class="partner">
      <span class="partner-logo">V</span>
      <span class="partner-name">Vimeo</span>
    </span>
    <span class="partner">
      <span class="partner-logo">E</span>
      <span class="partner-name">Epidemic Sound</span>
    </span>
    <span class="partner">
      <span class="partner-logo">R</span>
      <span class="partner-name">Red Giant</span>
    </span>
    <span class="partner">
      <span class="partner-logo">C</span>
      <span class="partner-name">Canon</span>
    </span>
    <span class="partner">
      <span class="partner-logo">S</span>
      <span class="partner-name">Sony</span>
    </span>
    <span class="partner">
      <span class="partner-logo">P</span>
      <span class="partner-name">Panasonic</span>
    </span>
    <span class="partner">
      <span class="partner-logo">A</span>
      <span class="partner-name">ARRI</span>
    </span>
    <span class="partner">
      <span class="partner-logo">D</span>
      <span class="partner-name">DJI</span>
    </span>
    <span class="partner">
      <span class="partner-logo">B</span>
      <span class="partner-name">Blackmagic</span>
    </span>
    <span class="partner">
      <span class="partner-logo">F</span>
      <span class="partner-name">Frame.io</span>
    </span>
    <span class="partner">
      <span class="partner-logo">V</span>
      <span class="partner-name">Vimeo</span>
    </span>
    <span class="partner">
      <span class="partner-logo">E</span>
      <span class="partner-name">Epidemic Sound</span>
    </span>
    <span class="partner">
      <span class="partner-logo">R</span>
      <span class="partner-name">Red Giant</span>
    </span>
  </div>
</section>





<!-- CONTACT / CTA (lead form) -->
<section class="cta-contact" id="contact" aria-label="Обсудить проект">
  <div class="cta-contact-inner">
    <div class="cta-copy">
      <h2 class="cta-title">ОБСУДИТЬ ПРОЕКТ?</h2>
      <p class="cta-desc">Оставьте заявку — наш продюсер свяжется с вами, уточнит детали и предложит следующий шаг.</p>
    </div>

    <form class="cta-form" action="#" method="post">
      <label class="field">
        <span class="field-label">Имя</span>
        <input type="text" name="name" placeholder="Ваше имя" autocomplete="name" />
      </label>
      <label class="field">
        <span class="field-label">Телефон</span>
        <input type="tel" name="phone" placeholder="+7 (___) ___‑__‑__" autocomplete="tel" />
      </label>
    </form>

    <div class="cta-actions">
      <button class="cta-btn" type="button">Отправить</button>
      <p class="cta-note">Нажимая кнопку «Отправить», Вы соглашаетесь с Политикой конфиденциальности.</p>
    </div>
  </div>
</section>

<!-- PROCESS — airy cards -->
<section class="process-cards" id="process" aria-label="Этапы создания видеоролика">
  <video class="process-bg-video lazy-video" muted loop playsinline preload="none" data-play-on-view aria-hidden="true">
    <source data-src="./assets/services/video/Background.mp4" type="video/mp4" />
  </video>
  <div class="process-bg-overlay" aria-hidden="true"></div>
  <div class="process-cards__inner">
    <div class="process-cards__head">
      <h2 class="process-cards__title">Этапы создания<br>видеоролика</h2>
    </div>

    <div class="process-cards__grid" role="list">
      <article class="pcard" role="listitem">
        <div class="pcard__no">01</div>
        <h3 class="pcard__title">Оценка проекта</h3>
        <p class="pcard__desc">Бриф + короткий созвон. Понимаем цель, формат и сроки, предлагаем подход и варианты реализации.</p>
      </article>

      <article class="pcard" role="listitem">
        <div class="pcard__no">02</div>
        <h3 class="pcard__title">Договор и смета</h3>
        <p class="pcard__desc">Фиксируем концепцию, бюджет и дедлайны. Собираем ТЗ и план работ — без сюрпризов по ходу.</p>
      </article>

      <article class="pcard" role="listitem">
        <div class="pcard__no">03</div>
        <h3 class="pcard__title">Препродакшн</h3>
        <p class="pcard__desc">Сценарий, раскадровка, локации и кастинг. Подбираем команду и готовим съёмочный план.</p>
      </article>

      <article class="pcard" role="listitem">
        <div class="pcard__no">04</div>
        <h3 class="pcard__title">Съёмки</h3>
        <p class="pcard__desc">Снимаем по утверждённому плану: режиссура, свет, камера и звук. Контроль материала на площадке.</p>
      </article>

      <article class="pcard" role="listitem">
        <div class="pcard__no">05</div>
        <h3 class="pcard__title">Постпродакшн</h3>
        <p class="pcard__desc">Монтаж, цвет, графика и саунд‑дизайн. Собираем финальный мастер и версии под платформы.</p>
      </article>

      <article class="pcard" role="listitem">
        <div class="pcard__no">06</div>
        <h3 class="pcard__title">Правки и сдача</h3>
        <p class="pcard__desc">Вносим правки по согласованным раундам и отдаём исходники/мастера. Закрываем документы.</p>
      </article>
    </div>
  </div>
</section>

<!-- TEAM (placeholder) -->
<section class="team" aria-label="Команда">
  <div class="team__inner">
    <h2 class="team__title">Команда</h2>
    <div class="team__grid" role="list">
      <article class="tcard" role="listitem">
        <div class="tcard__photo"><img src="./assets/img/ph_square.png" alt="Сотрудник 1" loading="lazy" /></div>
        <div class="tcard__name">Имя Фамилия</div>
        <div class="tcard__role">Продюсер</div>
      </article>
      <article class="tcard" role="listitem">
        <div class="tcard__photo"><img src="./assets/img/ph_square.png" alt="Сотрудник 2" loading="lazy" /></div>
        <div class="tcard__name">Имя Фамилия</div>
        <div class="tcard__role">Режиссёр</div>
      </article>
      <article class="tcard" role="listitem">
        <div class="tcard__photo"><img src="./assets/img/ph_square.png" alt="Сотрудник 3" loading="lazy" /></div>
        <div class="tcard__name">Имя Фамилия</div>
        <div class="tcard__role">Оператор</div>
      </article>
      <article class="tcard" role="listitem">
        <div class="tcard__photo"><img src="./assets/img/ph_square.png" alt="Сотрудник 4" loading="lazy" /></div>
        <div class="tcard__name">Имя Фамилия</div>
        <div class="tcard__role">Монтаж</div>
      </article>
    </div>
    <p class="team-note">Это не вся команда — мы собираем состав индивидуально под каждый проект: под задачу, стиль и сроки.</p>
  </div>
</section>

<!-- FAQ -->
<section class="faq" aria-label="Частые вопросы">
  <div class="faq__inner">
    <h2 class="faq__title">Частые вопросы</h2>

    <div class="faq__list" data-faq>
      <details class="faq-item">
        <summary class="faq-q">Сколько времени занимает проект?</summary>
        <div class="faq-a">В среднем от 7 до 21 дня — зависит от объёма, графики и количества локаций. Сроки фиксируем в договоре.</div>
      </details>
      <details class="faq-item">
        <summary class="faq-q">Вы работаете по договору?</summary>
        <div class="faq-a">Да. Утверждаем смету, ТЗ и этапы оплаты. Стартуем после согласования всех деталей.</div>
      </details>
      <details class="faq-item">
        <summary class="faq-q">Сколько раундов правок включено?</summary>
        <div class="faq-a">Обычно 2 раунда — этого хватает, чтобы довести ролик до финала без затягивания процесса.</div>
      </details>
      <details class="faq-item">
        <summary class="faq-q">Можно ли сделать версии под разные форматы?</summary>
        <div class="faq-a">Да. Делаем адаптации под вертикальные/горизонтальные форматы, субтитры и разные длительности.</div>
      </details>
    </div>
  </div>
</section>


<!-- FOOTER -->
<footer>
  <div class="footer-top">
    <div class="footer-brand">
      <div class="brand-logo">INDIVIDNI</div>
      <p>© <span id="year"></span> All Rights Reserved</p>
    </div>

    <div class="footer-col">
      <h4>Menu</h4>
      <a href="#projects">Projects</a>
      <a href="#download">Brief</a>
      <a href="#top">Top</a>
    </div>

    <div class="footer-col">
      <h4>Info</h4>
      <a href="mailto:hello@individnistudio.ru">Email</a>
      <a href="https://www.instagram.com/" target="_blank" rel="noreferrer">Instagram</a>
      <a href="https://www.behance.net/" target="_blank" rel="noreferrer">Behance</a>
    </div>
  </div>

  <div class="footer-bottom">INDIVIDNI Studio</div>
</footer>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox">
  <span class="lb-close" data-lb-close>×</span>
  <img id="lbImg" src="" alt="" />
</div>

<!-- SHOWREEL MODAL (opens on TV click) -->
<div class="showreel-modal" id="showreelModal" aria-hidden="true">
  <div class="showreel-backdrop" data-sr-close></div>
  <div class="showreel-dialog" role="dialog" aria-modal="true" aria-label="Шоурил" tabindex="-1">
    <button class="sr-close" type="button" aria-label="Закрыть" data-sr-close>
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18.3 5.7a1 1 0 0 0-1.4 0L12 10.6 7.1 5.7a1 1 0 1 0-1.4 1.4L10.6 12l-4.9 4.9a1 1 0 1 0 1.4 1.4L12 13.4l4.9 4.9a1 1 0 0 0 1.4-1.4L13.4 12l4.9-4.9a1 1 0 0 0 0-1.4Z"/></svg>
    </button>

    <div class="sr-wrap" data-sr-wrap>
      <video class="sr-video" id="showreelVideo" playsinline preload="none" webkit-playsinline>
        <source data-src="./assets/ui/showreel.mp4" type="video/mp4" />
      </video>

      <button class="sr-play" type="button" data-sr-play aria-label="Запустить шоурил">
        <svg class="sr-play__icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M8 5.7v12.6c0 .8.9 1.3 1.6.9l10.2-6.3c.6-.4.6-1.3 0-1.7L9.6 4.8c-.7-.4-1.6.1-1.6.9Z" fill="currentColor"/>
        </svg>
      </button>

      <button class="sr-sound" type="button" aria-label="Звук" data-sr-sound>
        <svg class="sr-ico" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M11 5 6.8 8.4H4a2 2 0 0 0-2 2v3.2a2 2 0 0 0 2 2h2.8L11 19V5Zm7.4 7a4.6 4.6 0 0 1-2.3 4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M20.5 7.5a9 9 0 0 1 0 9" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>

      <div class="sr-hoverHint" aria-hidden="true">Нажмите, чтобы остановить</div>
    </div>
  </div>
</div>

<!-- TV: heavy dependencies are lazy-loaded when the Projects block is near viewport -->
<script>
(() => {
  const stage = document.querySelector('[data-tv-hero]');
  if (!stage) return;

  const loadScript = (src) => new Promise((resolve, reject) => {
    const s = document.createElement('script');
    s.src = src;
    s.async = true;
    s.onload = () => resolve();
    s.onerror = () => reject(new Error('Failed to load ' + src));
    document.head.appendChild(s);
  });

  const ensureTV = async () => {
    if (window.__INDIVIDNI_TV_LOADED) return;
    window.__INDIVIDNI_TV_LOADED = true;
    try {
      // prime TV video sources right before TV init (so tv_hero.js sees a real src)
      const tvV = document.getElementById('tvHeroVideo');
      if (tvV) {
        tvV.querySelectorAll('source').forEach((s) => {
          if (!s.getAttribute('src') && s.dataset.src) s.setAttribute('src', s.dataset.src);
        });
        try { tvV.load(); } catch (_) {}
      }

      await loadScript('https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js');
      await loadScript('https://unpkg.com/fflate@0.7.4/umd/index.js');
      await loadScript('https://unpkg.com/three@0.128.0/examples/js/loaders/FBXLoader.js');
      await loadScript('./assets/js/tv_hero.js');
    } catch (e) {
      console.warn(e);
    }
  };

  const io = new IntersectionObserver((entries) => {
    if (entries.some((e) => e.isIntersecting)) {
      io.disconnect();
      ensureTV();
    }
  }, { threshold: 0.01, rootMargin: '700px 0px 700px 0px' });

  io.observe(stage);
})();
</script>

<!-- Landing JS -->
<script src="./assets/js/landing_ref.js?v=15"></script>

<script>
/* HERO bg: cache first frame as CSS background to avoid blank */
(() => {
  const hero = document.querySelector(".hero");
  const v = document.getElementById("heroBgVideo");
  if (!hero || !v) return;

  const KEY = "individni_hero_bg_poster_v1";
  const cached = (() => {
    try { return localStorage.getItem(KEY); } catch (e) { return null; }
  })();

  if (cached) hero.style.backgroundImage = `url(${cached})`;

  const capture = () => {
    try {
      const vw = v.videoWidth || 0;
      const vh = v.videoHeight || 0;
      if (!vw || !vh) return;

      // downscale hard to keep work + localStorage small
      const targetW = Math.min(520, vw);
      const scale = targetW / vw;
      const targetH = Math.round(vh * scale);

      const c = document.createElement("canvas");
      c.width = targetW;
      c.height = targetH;
      const ctx = c.getContext("2d", { willReadFrequently: true });
      ctx.drawImage(v, 0, 0, targetW, targetH);

      const dataUrl = c.toDataURL("image/jpeg", 0.62);
      hero.style.backgroundImage = `url(${dataUrl})`;

      // avoid huge localStorage entries
      if (dataUrl.length < 420000) {
        try { localStorage.setItem(KEY, dataUrl); } catch (e) {}
      }
    } catch (e) {}
  };

  // As soon as we have something to draw (usually first frame)
  v.addEventListener("loadeddata", () => {
    const idle = window.requestIdleCallback || ((fn) => setTimeout(fn, 60));
    idle(capture);
  }, { once: true });
})();
</script>

<script>
/* Lazy-load + play videos only when section is in view (saves CPU on first load) */
(() => {
  const reduce = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  const vids = Array.from(document.querySelectorAll("video[data-play-on-view]"));
  if (!vids.length) return;

  const prime = (v) => {
    if (v.dataset.primed) return;
    v.dataset.primed = "1";

    v.querySelectorAll("source").forEach((s) => {
      if (!s.getAttribute("src") && s.dataset.src) s.setAttribute("src", s.dataset.src);
    });
    try { v.load(); } catch (_) {}
  };

  const play = (v) => {
    if (reduce) return;
    if (window.__INDIVIDNI_MODAL_OPEN) return;
    prime(v);
    const go = () => v.play && v.play().catch(() => {});
    if (v.readyState >= 2) go();
    else v.addEventListener("loadeddata", go, { once: true });
  };

  const stop = (v) => {
    try { v.pause(); } catch (_) {}
  };

  const io = new IntersectionObserver((entries) => {
    entries.forEach((e) => {
      const v = e.target;
      if (e.isIntersecting) play(v);
      else stop(v);
    });
  }, { threshold: 0.15, rootMargin: "220px 0px 220px 0px" });

  vids.forEach((v) => {
    // prevent eager start
    v.autoplay = false;
    stop(v);
    io.observe(v);
  });
})();
</script>

<script>
/* Showreel modal: click on TV opens pop-up with showreel.mp4 (sound toggle + zoom anim) */
(() => {
  const modal = document.getElementById('showreelModal');
  const dialog = modal?.querySelector('.showreel-dialog');
  const tvStage = document.querySelector('[data-open-showreel]');
  const v = document.getElementById('showreelVideo');
  const wrap = modal?.querySelector('[data-sr-wrap]');
  const btnPlay = modal?.querySelector('[data-sr-play]');
  const btnSound = modal?.querySelector('[data-sr-sound]');
  const closers = modal?.querySelectorAll('[data-sr-close]') || [];
  const tvVideo = document.getElementById('tvHeroVideo');

  if (!modal || !dialog || !tvStage || !v || !btnPlay || !btnSound || !wrap) return;

  const primeShowreel = () => {
    if (v.dataset.primed) return;
    v.dataset.primed = '1';
    v.querySelectorAll('source').forEach((s) => {
      if (!s.getAttribute('src') && s.dataset.src) s.setAttribute('src', s.dataset.src);
    });
    try { v.load(); } catch (_) {}
  };

  const open = () => {
    window.__INDIVIDNI_MODAL_OPEN = true;
    document.body.classList.add('modal-open');
    modal.classList.add('is-open');
    modal.setAttribute('aria-hidden', 'false');

    // pause videos behind (and stop TV video to save CPU)
    try { tvVideo?.pause(); } catch (_) {}
    document.querySelectorAll('video[data-play-on-view]').forEach((vv) => {
      try {
        if (!vv.paused) vv.dataset.pausedByModal = '1';
        vv.pause();
      } catch (_) {}
    });

    setTimeout(() => { try { dialog.focus(); } catch (_) {} }, 50);
  };

  const close = () => {
    modal.classList.remove('is-open');
    modal.setAttribute('aria-hidden', 'true');
    document.body.classList.remove('modal-open');
    window.__INDIVIDNI_MODAL_OPEN = false;

    // stop modal video
    try { v.pause(); } catch (_) {}
    v.currentTime = 0;
    btnPlay.classList.remove('is-hidden');
    wrap.classList.remove('is-playing');

    // resume videos that were playing
    const resume = () => {
      document.querySelectorAll('video[data-paused-by-modal="1"]').forEach((vv) => {
        vv.removeAttribute('data-paused-by-modal');
        try { vv.play && vv.play().catch(() => {}); } catch (_) {}
      });
    };
    setTimeout(resume, 80);
  };

  const togglePlay = async () => {
    primeShowreel();
    if (v.paused) {
      btnPlay.classList.add('is-hidden');
      wrap.classList.add('is-playing');
      try { await v.play(); } catch (_) {
        btnPlay.classList.remove('is-hidden');
        wrap.classList.remove('is-playing');
      }
    } else {
      try { v.pause(); } catch (_) {}
      btnPlay.classList.remove('is-hidden');
      wrap.classList.remove('is-playing');
    }
  };

  const toggleSound = () => {
    v.muted = !v.muted;
    btnSound.classList.toggle('is-on', !v.muted);
  };

  // open
  tvStage.addEventListener('click', (e) => {
    e.preventDefault();
    open();
  });
  tvStage.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      open();
    }
  });

  // close
  closers.forEach((c) => c.addEventListener('click', close));
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.classList.contains('is-open')) close();
  });

  // play / stop
  btnPlay.addEventListener('click', (e) => {
    e.stopPropagation();
    togglePlay();
  });
  wrap.addEventListener('click', (e) => {
    if (e.target === btnSound || e.target.closest('[data-sr-close]')) return;
    if (wrap.classList.contains('is-playing')) togglePlay();
  });

  // sound
  v.muted = true;
  btnSound.classList.remove('is-on');
  btnSound.addEventListener('click', (e) => {
    e.stopPropagation();
    primeShowreel();
    toggleSound();
  });

  // if video ends — show play again
  v.addEventListener('ended', () => {
    btnPlay.classList.remove('is-hidden');
    wrap.classList.remove('is-playing');
  });
})();
</script>

</body>
</html>
